<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Phalanx: PHX::ViewOfViews2&lt; OuterViewRank, InnerViewType, OuterViewProps &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Phalanx<span id="projectnumber">&#160;Development</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>PHX</b></li><li class="navelem"><a class="el" href="class_p_h_x_1_1_view_of_views2.html">ViewOfViews2</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_p_h_x_1_1_view_of_views2-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">PHX::ViewOfViews2&lt; OuterViewRank, InnerViewType, OuterViewProps &gt; Class Template Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;Phalanx_KokkosViewOfViews.hpp&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:ab4ed3bf8b7d21d19cee5ebeb73d5135e" id="r_ab4ed3bf8b7d21d19cee5ebeb73d5135e"><td class="memItemLeft" align="right" valign="top"><a id="ab4ed3bf8b7d21d19cee5ebeb73d5135e" name="ab4ed3bf8b7d21d19cee5ebeb73d5135e"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>InnerViewTypeManaged</b> = InnerViewType</td></tr>
<tr class="separator:ab4ed3bf8b7d21d19cee5ebeb73d5135e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aace0f47bb49ecdeb38008c0b5fe864b1" id="r_aace0f47bb49ecdeb38008c0b5fe864b1"><td class="memItemLeft" align="right" valign="top"><a id="aace0f47bb49ecdeb38008c0b5fe864b1" name="aace0f47bb49ecdeb38008c0b5fe864b1"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>InnerViewTypeUnmanaged</b> = decltype(PHX::details::getUnmanaged(std::declval&lt; InnerViewType &gt;()))</td></tr>
<tr class="separator:aace0f47bb49ecdeb38008c0b5fe864b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcc1c1b5d7717409f6d3d6c0052f919c" id="r_adcc1c1b5d7717409f6d3d6c0052f919c"><td class="memItemLeft" align="right" valign="top"><a id="adcc1c1b5d7717409f6d3d6c0052f919c" name="adcc1c1b5d7717409f6d3d6c0052f919c"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>OuterViewDataTypeManagedInner</b> = typename <a class="el" href="struct_p_h_x_1_1v__of__v__utils_1_1add__pointer.html">PHX::v_of_v_utils::add_pointer</a>&lt; InnerViewTypeManaged, OuterViewRank &gt;::type</td></tr>
<tr class="separator:adcc1c1b5d7717409f6d3d6c0052f919c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace2f334e36299b2fa329061013874572" id="r_ace2f334e36299b2fa329061013874572"><td class="memItemLeft" align="right" valign="top"><a id="ace2f334e36299b2fa329061013874572" name="ace2f334e36299b2fa329061013874572"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>OuterViewDataTypeUnmanagedInner</b> = typename <a class="el" href="struct_p_h_x_1_1v__of__v__utils_1_1add__pointer.html">PHX::v_of_v_utils::add_pointer</a>&lt; InnerViewTypeUnmanaged, OuterViewRank &gt;::type</td></tr>
<tr class="separator:ace2f334e36299b2fa329061013874572"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa745d503653a1b70e1f9dd52b398d975" id="r_aa745d503653a1b70e1f9dd52b398d975"><td class="memItemLeft" align="right" valign="top"><a id="aa745d503653a1b70e1f9dd52b398d975" name="aa745d503653a1b70e1f9dd52b398d975"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>OuterViewManaged</b> = <a class="el" href="class_kokkos_1_1_view.html">Kokkos::View</a>&lt; OuterViewDataTypeManagedInner, OuterViewProps... &gt;</td></tr>
<tr class="separator:aa745d503653a1b70e1f9dd52b398d975"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e260f33041b72aa674e60d5f51c99b2" id="r_a7e260f33041b72aa674e60d5f51c99b2"><td class="memItemLeft" align="right" valign="top"><a id="a7e260f33041b72aa674e60d5f51c99b2" name="a7e260f33041b72aa674e60d5f51c99b2"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>OuterViewUnmanaged</b> = <a class="el" href="class_kokkos_1_1_view.html">Kokkos::View</a>&lt; OuterViewDataTypeUnmanagedInner, OuterViewProps... &gt;</td></tr>
<tr class="separator:a7e260f33041b72aa674e60d5f51c99b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b2ff0374019de241e355be9fad69bb7" id="r_a1b2ff0374019de241e355be9fad69bb7"><td class="memItemLeft" align="right" valign="top"><a id="a1b2ff0374019de241e355be9fad69bb7" name="a1b2ff0374019de241e355be9fad69bb7"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>OuterViewManagedHostMirror</b> = typename OuterViewManaged::host_mirror_type</td></tr>
<tr class="separator:a1b2ff0374019de241e355be9fad69bb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2594e0af8e9d65e5113d1998f1bada7a" id="r_a2594e0af8e9d65e5113d1998f1bada7a"><td class="memItemLeft" align="right" valign="top"><a id="a2594e0af8e9d65e5113d1998f1bada7a" name="a2594e0af8e9d65e5113d1998f1bada7a"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>OuterViewUnmanagedHostMirror</b> = typename OuterViewUnmanaged::host_mirror_type</td></tr>
<tr class="separator:a2594e0af8e9d65e5113d1998f1bada7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9e082a3532bc6bbabfa675c2304f2e32" id="r_a9e082a3532bc6bbabfa675c2304f2e32"><td class="memTemplParams" colspan="2"><a id="a9e082a3532bc6bbabfa675c2304f2e32" name="a9e082a3532bc6bbabfa675c2304f2e32"></a>
template&lt;typename... Extents&gt; </td></tr>
<tr class="memitem:a9e082a3532bc6bbabfa675c2304f2e32"><td class="memTemplItemLeft" align="right" valign="top">&#160;</td><td class="memTemplItemRight" valign="bottom"><b>ViewOfViews2</b> (const std::string name, Extents... extents)</td></tr>
<tr class="separator:a9e082a3532bc6bbabfa675c2304f2e32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af98bdc8b02b313a0eaf7668885b8bf35" id="r_af98bdc8b02b313a0eaf7668885b8bf35"><td class="memTemplParams" colspan="2"><a id="af98bdc8b02b313a0eaf7668885b8bf35" name="af98bdc8b02b313a0eaf7668885b8bf35"></a>
template&lt;typename... Extents&gt; </td></tr>
<tr class="memitem:af98bdc8b02b313a0eaf7668885b8bf35"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><b>initialize</b> (const std::string name, Extents... extents)</td></tr>
<tr class="memdesc:af98bdc8b02b313a0eaf7668885b8bf35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate the out view objects. Extents are for the outer view. <br /></td></tr>
<tr class="separator:af98bdc8b02b313a0eaf7668885b8bf35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a664814bc9c505c786e3170a58bf21929" id="r_a664814bc9c505c786e3170a58bf21929"><td class="memTemplParams" colspan="2"><a id="a664814bc9c505c786e3170a58bf21929" name="a664814bc9c505c786e3170a58bf21929"></a>
template&lt;typename... Indices&gt; </td></tr>
<tr class="memitem:a664814bc9c505c786e3170a58bf21929"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><b>setView</b> (InnerViewType v, Indices... i)</td></tr>
<tr class="memdesc:a664814bc9c505c786e3170a58bf21929"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set an inner device view on the outer view. Indices are the outer view indices. <br /></td></tr>
<tr class="separator:a664814bc9c505c786e3170a58bf21929"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6f0c83c613d4083f40eb0b7901d72ac" id="r_af6f0c83c613d4083f40eb0b7901d72ac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_p_h_x_1_1_view_of_views2.html#af6f0c83c613d4083f40eb0b7901d72ac">syncHostToDevice</a> ()</td></tr>
<tr class="separator:af6f0c83c613d4083f40eb0b7901d72ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac25de796e702381f5b29d64384f68366" id="r_ac25de796e702381f5b29d64384f68366"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_p_h_x_1_1_view_of_views2.html#ac25de796e702381f5b29d64384f68366">getViewHost</a> ()</td></tr>
<tr class="separator:ac25de796e702381f5b29d64384f68366"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a732cd72774b82ccc40082ea07b5004f3" id="r_a732cd72774b82ccc40082ea07b5004f3"><td class="memItemLeft" align="right" valign="top"><a id="a732cd72774b82ccc40082ea07b5004f3" name="a732cd72774b82ccc40082ea07b5004f3"></a>
auto&#160;</td><td class="memItemRight" valign="bottom"><b>getViewDevice</b> ()</td></tr>
<tr class="memdesc:a732cd72774b82ccc40082ea07b5004f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns device view of views. <br /></td></tr>
<tr class="separator:a732cd72774b82ccc40082ea07b5004f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;int OuterViewRank, typename InnerViewType, typename... OuterViewProps&gt;<br />
class PHX::ViewOfViews2&lt; OuterViewRank, InnerViewType, OuterViewProps &gt;</div><p><a class="el" href="class_wrapper.html">Wrapper</a> class that correctly handles <a class="el" href="class_p_h_x_1_1_view_of_views.html">ViewOfViews</a> construction and object lifetime. This class makes sure the host view stays in scope for the life of the device view and makes sure that the device is synced to host before use.</p>
<p>Main restrictions:</p>
<ol type="1">
<li>When UVM is not used in the outer view, we need to allocate the VofV on host and deep_copy to device to set up the inner views correctly.</li>
<li>Step 1 means that the host view must exist as long as the device view is being used, otherwise the inner views may go out of scope and delete memory. This object exists to pair up the host and device view to make sure the inner views are not deleted early.</li>
<li>The InnerViewType template parameter must be managed. We will add the unmanaged tag internally.</li>
<li>This object assumes that all inner views are on device. When the accessors reference Host/Device it is with respect to the outer view. If a user wants to initialize the inner view data, they must do that manually external to this object and deep_copy to the device views.</li>
</ol>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">OuterViewRank</td><td>The rank of the outerview. </td></tr>
    <tr><td class="paramname">InnerViewType</td><td>The type of inner view. Currently MUST be a Managed view! </td></tr>
    <tr><td class="paramname">OuterViewProps</td><td>View properties for the outer view (i.e. space, layout, memory traits, ...). </td></tr>
  </table>
  </dd>
</dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ac25de796e702381f5b29d64384f68366" name="ac25de796e702381f5b29d64384f68366"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac25de796e702381f5b29d64384f68366">&#9670;&#160;</a></span>getViewHost()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int OuterViewRank, typename InnerViewType , typename... OuterViewProps&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto <a class="el" href="class_p_h_x_1_1_view_of_views2.html">PHX::ViewOfViews2</a>&lt; OuterViewRank, InnerViewType, OuterViewProps &gt;::getViewHost </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns a host mirror view for the outer view, where the inner views are still on device. </p>

</div>
</div>
<a id="af6f0c83c613d4083f40eb0b7901d72ac" name="af6f0c83c613d4083f40eb0b7901d72ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6f0c83c613d4083f40eb0b7901d72ac">&#9670;&#160;</a></span>syncHostToDevice()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int OuterViewRank, typename InnerViewType , typename... OuterViewProps&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_p_h_x_1_1_view_of_views2.html">PHX::ViewOfViews2</a>&lt; OuterViewRank, InnerViewType, OuterViewProps &gt;::syncHostToDevice </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Note this only syncs the outer view. The inner views are assumed to be on device for both host and device outer views. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><b>design/Phalanx_KokkosViewOfViews.hpp</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
