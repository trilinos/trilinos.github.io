<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ML: ml_amesos_wrap.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ML<span id="projectnumber">&#160;Version of the Day</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_a7363e98f9e0bdd87618633653859815.html">Utils</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">ml_amesos_wrap.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Interface to the Trilinos package Amesos.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;ml_include.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ml_amesos_wrap.h:</div>
<div class="dyncontent">
<div class="center"><img src="ml__amesos__wrap_8h__incl.gif" border="0" usemap="#aml__amesos__wrap_8h" alt=""/></div>
<map name="aml__amesos__wrap_8h" id="aml__amesos__wrap_8h">
<area shape="rect" title="Interface to the Trilinos package Amesos." alt="" coords="5,5,153,31"/>
<area shape="rect" title=" " alt="" coords="27,79,132,104"/>
<area shape="poly" title=" " alt="" coords="82,31,82,65,77,65,77,31"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="ml__amesos__wrap_8h__dep__incl.gif" border="0" usemap="#aml__amesos__wrap_8hdep" alt=""/></div>
<map name="aml__amesos__wrap_8hdep" id="aml__amesos__wrap_8hdep">
<area shape="rect" title="Interface to the Trilinos package Amesos." alt="" coords="270,5,418,31"/>
<area shape="rect" href="MLAPI__Operator__Utils_8h.html" title="Suite of utilities for MLAPI::Operator objects." alt="" coords="141,79,317,104"/>
<area shape="poly" title=" " alt="" coords="316,40,249,81,247,76,313,35"/>
<area shape="rect" href="ml__MultiLevelPreconditioner_8cpp.html" title="ML black&#45;box preconditioner for Epetra_RowMatrix derived classes." alt="" coords="341,79,576,104"/>
<area shape="poly" title=" " alt="" coords="375,35,441,76,439,81,372,40"/>
<area shape="rect" href="MLAPI__MultiLevelAdaptiveSA_8h.html" title="Adaptive smoothed aggregation preconditioner." alt="" coords="5,152,232,177"/>
<area shape="poly" title=" " alt="" coords="201,114,138,154,135,150,199,109"/>
<area shape="rect" href="MLAPI__MultiLevelSA_8h.html" title="Standard smoothed aggregation multilevel preconditioner." alt="" coords="256,152,424,177"/>
<area shape="poly" title=" " alt="" coords="260,109,323,150,320,154,257,114"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af93b70c0c594f02f4e6993658282bb87" id="r_af93b70c0c594f02f4e6993658282bb87"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ml__amesos__wrap_8h.html#af93b70c0c594f02f4e6993658282bb87">ML_Amesos_Gen</a> (<a class="el" href="structML__Struct.html">ML</a> *ml, int curr_level, int choice, int MaxProcs, double AddToDiag, int SplitComm, Amesos_Handle_Type *Amesos_Handle)</td></tr>
<tr class="separator:af93b70c0c594f02f4e6993658282bb87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78c3df0cb437efe8c7903655815d1110" id="r_a78c3df0cb437efe8c7903655815d1110"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ml__amesos__wrap_8h.html#a78c3df0cb437efe8c7903655815d1110">ML_Amesos_Solve</a> (void *Amesos_Handle, double x[], double rhs[])</td></tr>
<tr class="separator:a78c3df0cb437efe8c7903655815d1110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57b35c060fc213f150b909372f75e288" id="r_a57b35c060fc213f150b909372f75e288"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ml__amesos__wrap_8h.html#a57b35c060fc213f150b909372f75e288">ML_Amesos_Destroy</a> (void *Amesos_Handle)</td></tr>
<tr class="separator:a57b35c060fc213f150b909372f75e288"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae76d485a0f81f6b3cfe238be8e99bce9" id="r_ae76d485a0f81f6b3cfe238be8e99bce9"><td class="memItemLeft" align="right" valign="top"><a id="ae76d485a0f81f6b3cfe238be8e99bce9" name="ae76d485a0f81f6b3cfe238be8e99bce9"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>ML_isKLUAvailable</b> ()</td></tr>
<tr class="separator:ae76d485a0f81f6b3cfe238be8e99bce9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Interface to the Trilinos package Amesos. </p>
<p>The ML/Amesos interface can be used to solve the coarse problem with some of the sparse direct solvers supported by Amesos:</p><ul>
<li>KLU, a simple serial sparse solver, distributed with Amesos;</li>
<li>UMFPACK, a serial sparse solver;</li>
<li>SuperLU and SuperLU_DIST</li>
<li>MUMPS, a multifrontal sparse direct solver.</li>
</ul>
<p>For serial solvers, Amesos will take care to redistribute all required data to process 0, solve the linear system on process 0, then broadcast the solution back to all the processes.</p>
<p>For parallel solvers (like SuperLU_DIST and MUMPS), the user can tell Amesos how many processes should be used for the coarse solution. This number can be:</p><ul>
<li>a positive number, that defines how many processes will be used (if available);</li>
<li>the number -1, meaning that Amesos will estimate the "best" number of processes;</li>
<li>the number -2, meaning that Amesos will use the square root of the available processes.</li>
</ul>
<p>In its current implementation, ML/Amesos converts the ML_Operator for the coarse level to and Epetra matrix ("heavy conversion").</p>
<dl class="section note"><dt>Note</dt><dd>If <code>ML_AMESOS_DEBUG</code> is defined, some checks are performed to verify that the linear system has been solved up to machine precision.</dd>
<dd>
We experienced some problems with <code>out</code> on TFLOPS. These problems were solved by replacing <code>cout</code> with <code>puts()</code>.</dd></dl>
<dl class="section date"><dt>Date</dt><dd>Last update to Doxygen: 21-Jun-05 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a57b35c060fc213f150b909372f75e288" name="a57b35c060fc213f150b909372f75e288"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57b35c060fc213f150b909372f75e288">&#9670;&#160;</a></span>ML_Amesos_Destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ML_Amesos_Destroy </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Amesos_Handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destroy the Amesos object. Prints out some timing. </p>

</div>
</div>
<a id="af93b70c0c594f02f4e6993658282bb87" name="af93b70c0c594f02f4e6993658282bb87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af93b70c0c594f02f4e6993658282bb87">&#9670;&#160;</a></span>ML_Amesos_Gen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ML_Amesos_Gen </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structML__Struct.html">ML</a> *&#160;</td>
          <td class="paramname"><em>ml</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>curr_level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>choice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>MaxProcs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>AddToDiag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>SplitComm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Amesos_Handle_Type *&#160;</td>
          <td class="paramname"><em>Amesos_Handle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Generates the direct solver using Amesos.</p>
<p>This function performs several operations:</p><ul>
<li>wrap the ML_Operator for the given level to an <a class="elRef" href="../../../epetra/doc/html/classEpetra__CrsMatrix.html">Epetra_CrsMatrix</a></li>
<li>creates the Amesos object;</li>
<li>compute the symbolic and numeric factorzation.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ml</td><td>(InOut) : ML_Structure</td></tr>
    <tr><td class="paramname">curr_level</td><td>(In) : specifies the level for which we have to define the direct solver;</td></tr>
    <tr><td class="paramname">choice</td><td>(In) : integer variable, that can be ML_AMESOS_KLU, ML_AMESOS_UMFPACK, ML_AMESOS_SUPERLUDIST, ML_AMESOS_MUMPS, ML_AMESOS_SCALAPACK;</td></tr>
    <tr><td class="paramname">MaxProcs</td><td>(In) : integer defining the maximum number of processes to use in the coarse solution (only for some of the supported Amesos solvers);</td></tr>
    <tr><td class="paramname">Amesos</td><td>(In) : add the specified value to the diagonal elements of the matrix.</td></tr>
    <tr><td class="paramname">Amesos_Handle</td><td>(Out) : it will contain a pointer to the Amesos object (casted to void *).</td></tr>
  </table>
  </dd>
</dl>
<p>If the required solver is not available, ML_Amesos_Gen will create a KLU solver. KLU is distributed with Amesos, and is enabled by default. </p>

</div>
</div>
<a id="a78c3df0cb437efe8c7903655815d1110" name="a78c3df0cb437efe8c7903655815d1110"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78c3df0cb437efe8c7903655815d1110">&#9670;&#160;</a></span>ML_Amesos_Solve()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ML_Amesos_Solve </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Amesos_Handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>x</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>rhs</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Solves using Amesos, and the factorization computed by ML_Amesos_Gen. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Oct 9 2025 20:41:06 for ML by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
