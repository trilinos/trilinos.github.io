<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Zoltan2: Trilinos/Zoltan2: Load Balancing and Combinatorial Scientific Computing.</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Zoltan2
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Trilinos/Zoltan2: Load Balancing and Combinatorial Scientific Computing. </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="mainpage_contents"></a>
Contents</h1>
<ul>
<li>
<a class="el" href="index.html#z2_main_intro">Introduction to Zoltan2</a> </li>
<li>
<a class="el" href="index.html#z2_main_building">Building and Installing Zoltan2</a> </li>
<li>
<a class="el" href="index.html#z2_main_build2">Building Projects with Zoltan2</a> </li>
<li>
<a class="el" href="index.html#z2_main_overview">Overview of the library usage</a> </li>
</ul>
<hr  />
<p>Information specifically for developers can be found at <a class="el" href="z2_developer.html">Developers' Notes</a>.</p>
<hr  />
<h1><a class="anchor" id="z2_main_intro"></a>
Introduction to Zoltan2</h1>
<p><a class="el" href="namespaceZoltan2.html" title="Created by mbenlioglu on Aug 31, 2020.">Zoltan2</a> is a package for partitioning, load balancing and combinatorial scientific computing. It can be viewed as a complete redesign/refactoring of the well known <a href="http://www.cs.sandia.gov/Zoltan">Zoltan </a> library into C++ in order to support template programming, to scale to larger problems, and to support architecture aware partitioning. This library is currently under active development. The capabilities in <a class="el" href="namespaceZoltan2.html" title="Created by mbenlioglu on Aug 31, 2020.">Zoltan2</a> roughly fall within the following areas (click on the link for a full description of an area and how <a class="el" href="namespaceZoltan2.html" title="Created by mbenlioglu on Aug 31, 2020.">Zoltan2</a> can be used in this context): </p><ul>
<li>
<a class="el" href="partitionPage.html">Partitioning and Load-Balancing</a> </li>
<li>
<a class="el" href="orderingPage.html">Ordering and Permutations</a> </li>
<li>
<a class="el" href="coloringPage.html">Coloring</a> <br  />
 </li>
</ul>
<hr  />
<h1><a class="anchor" id="z2_main_building"></a>
Building and Installing Zoltan2</h1>
<h2><a class="anchor" id="z2_main_build_basics"></a>
Zoltan2 Build Basics</h2>
<p><a class="el" href="namespaceZoltan2.html" title="Created by mbenlioglu on Aug 31, 2020.">Zoltan2</a> is part of the Trilinos framework and uses the Trilinos CMake build system for configuration and builiding. In order to build <a class="el" href="namespaceZoltan2.html" title="Created by mbenlioglu on Aug 31, 2020.">Zoltan2</a>, you need to use the Trilinos_ENABLE_Zoltan2 cmake directive. The most basic way to build <a class="el" href="namespaceZoltan2.html" title="Created by mbenlioglu on Aug 31, 2020.">Zoltan2</a> is to execute the following two commands in your build directory (typically distinct from the source directory): </p><pre class="fragment">% cmake \
    -D Trilinos_ENABLE_Zoltan2:BOOL=ON \
    /path/to/Trilinos/src/directory 
% make
</pre><p>The first statement is the cmake configuration step that configures the build, creates Makefiles, etc. The second statement builds the <a class="el" href="namespaceZoltan2.html" title="Created by mbenlioglu on Aug 31, 2020.">Zoltan2</a> library and all required libraries. <a class="el" href="namespaceZoltan2.html" title="Created by mbenlioglu on Aug 31, 2020.">Zoltan2</a> requires several of the other Trilinos packages to be built. (Tpetra, Epetra, <a class="el" href="namespaceTeuchos.html">Teuchos</a>, Xpetra and the packages that are required for those). The Trilinos framework should automatically enable these required packages during the configuration process if <a class="el" href="namespaceZoltan2.html" title="Created by mbenlioglu on Aug 31, 2020.">Zoltan2</a> is enabled.</p>
<p>Two important Trilinos configurations options of note relate to Fortran and MPI. If you do not have a fortran compiler installed, you should disable Fortran with the Trilinos_ENABLE_Fortran cmake directive. If you wish to have Zoltan run in a parallel (distributed memory) fashion, it is also important to enable MPI using the TPL_ENABLE_MPI directive. A very simple configure command for users with MPI but without Fortran is as follows: </p><pre class="fragment">% cmake \
    -D Trilinos_ENABLE_Zoltan2:BOOL=ON \
    -D Trilinos_ENABLE_Fortran:BOOL=OFF \
    -D TPL_ENABLE_MPI:BOOL=ON \
    /path/to/Trilinos/src/directory 
</pre><p> It is also important to note that by default the build system will enable all optional dependencies (Anasazi and Zoltan for <a class="el" href="namespaceZoltan2.html" title="Created by mbenlioglu on Aug 31, 2020.">Zoltan2</a>). In order to reduce the compilation time of the <a class="el" href="namespaceZoltan2.html" title="Created by mbenlioglu on Aug 31, 2020.">Zoltan2</a> build, one may wish to disable these optional depencies using the Trilinos_ENABLE_ALL_OPTIONAL_PACKAGES directive: </p><pre class="fragment">% cmake \
    -D Trilinos_ENABLE_Zoltan2:BOOL=ON \
    -D Trilinos_ENABLE_Fortran:BOOL=OFF \
    -D TPL_ENABLE_MPI:BOOL=ON \
    -D Trilinos_ENABLE_ALL_OPTIONAL_PACKAGES=OFF \
    /path/to/Trilinos/src/directory 
</pre><p> For more information on the Trilinos cmake build system see the Trilinos CMake Reference document (link can be found at <a href="http://trilinos.org/about/documentation/">http://trilinos.org/about/documentation/</a>). <br  />
 In the next subsection, we discuss some of the <a class="el" href="namespaceZoltan2.html" title="Created by mbenlioglu on Aug 31, 2020.">Zoltan2</a> specific cmake directives and other Trilinos directives that directly impact the <a class="el" href="namespaceZoltan2.html" title="Created by mbenlioglu on Aug 31, 2020.">Zoltan2</a> functionality.</p>
<h2><a class="anchor" id="z2_main_build_TPL"></a>
Third-Party Libraries (TPL)</h2>
<p><a class="el" href="namespaceZoltan2.html" title="Created by mbenlioglu on Aug 31, 2020.">Zoltan2</a> allows the optional use of several third-party libraries, which are not written nor maintained by the <a class="el" href="namespaceZoltan2.html" title="Created by mbenlioglu on Aug 31, 2020.">Zoltan2</a> team. To use a TPL, it must be explicitly enabled at configure time:</p>
<ul>
<li><code>TPL_ENABLE_Scotch</code> for graph partitioning/ordering using the Scotch package </li>
<li><code>TPL_ENABLE_ParMETIS</code> for graph partitioning/ordering using the ParMETIS package </li>
<li><code>TPL_ENABLE_PaToH</code> for hypergraph partitioning using the PaToH package </li>
<li><code>TPL_ENABLE_AMD</code> for Approximate Minimum Degree ordering</li>
</ul>
<p>One may also need to specify appropriate include and library paths, such as Scotch_INCLUDE_DIRS and Scotch_LIBRARY_DIRS. Example: </p><pre class="fragment">% cmake \
    -D Trilinos_ENABLE_Zoltan2:BOOL=ON \
    -D TPL_ENABLE_MPI:BOOL=ON \
    -D TPL_ENABLE_Scotch:BOOL=ON \
-D Scotch_LIBRARY_DIRS:FILEPATH="/path/to/Scotch/lib" \
-D Scotch_INCLUDE_DIRS:FILEPATH="/path/to/Scotch/include" \
    /path/to/Trilinos/src/directory 
</pre><h2><a class="anchor" id="z2_main_build_additional"></a>
Additional Zoltan2 Related Build Options</h2>
<p>The following CMake configure directives can also impact <a class="el" href="namespaceZoltan2.html" title="Created by mbenlioglu on Aug 31, 2020.">Zoltan2</a> behavior:</p>
<ul>
<li><code>Trilinos_ENABLE_OpenMP</code> if enabled, use OpenMP for multithreaded execution. (Note only some parts of <a class="el" href="namespaceZoltan2.html" title="Created by mbenlioglu on Aug 31, 2020.">Zoltan2</a> can use OpenMP, and not all of <a class="el" href="namespaceZoltan2.html" title="Created by mbenlioglu on Aug 31, 2020.">Zoltan2</a> is thread-safe.) </li>
<li><code>Trilinos_ENABLE_EXPLICIT_INSTANTIATION</code> if explicit instantiation is on, all <a class="el" href="namespaceZoltan2.html" title="Created by mbenlioglu on Aug 31, 2020.">Zoltan2</a> tests will be compiled with the instantiated types </li>
<li><code>Zoltan2_ENABLE_Experimental</code> if enabled, code which is still under development will be available for use</li>
</ul>
<p>These are some of the compilation flags used by <a class="el" href="namespaceZoltan2.html" title="Created by mbenlioglu on Aug 31, 2020.">Zoltan2</a>:</p>
<ul>
<li><code>Z2_OMIT_ALL_STATUS_MESSAGES</code> The debug_level parameter controls the verbosity of status messages. When compiled with this option, the checks for debug_level are bypassed and all status output code is ignored. </li>
<li><code>Z2_OMIT_ALL_PROFILING</code> Checks are done at runtime to determine whether any of the memory or timer parameters were set, prior to checking memory in use or to start or stop a ttimer. When compiled with this option, those checks are bypassed. </li>
<li><code>Z2_OMIT_ALL_ERROR_CHECKING</code> The error_check_level parameter controls the amount of error checking done at runtime. When this flag is set, all error checking code is compiled out.</li>
</ul>
<h2><a class="anchor" id="z2_main_build_install"></a>
Zoltan2 Installation</h2>
<p>To install <a class="el" href="namespaceZoltan2.html" title="Created by mbenlioglu on Aug 31, 2020.">Zoltan2</a> (and the other enabled Trilinos libraries) in a user specified location, the cmake directive CMAKE_INSTALL_PREFIX should be used as shown in the below installation example:</p>
<pre class="fragment">% cmake \
    -D Trilinos_ENABLE_Zoltan2:BOOL=ON \
    -D Trilinos_ENABLE_Fortran:BOOL=OFF \
    -D TPL_ENABLE_MPI:BOOL=ON \
    -D Trilinos_ENABLE_ALL_OPTIONAL_PACKAGES=OFF \
    -D CMAKE_INSTALL_PREFIX:PATH=/path/to/directory/of/installation \
    /path/to/Trilinos/src/directory 
% make
% make install
</pre><p> Once installed, many files important to <a class="el" href="namespaceZoltan2.html" title="Created by mbenlioglu on Aug 31, 2020.">Zoltan2</a> will be placed in this install directory:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">What   </th><th class="markdownTableHeadCenter">Location    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">Header files   </td><td class="markdownTableBodyCenter">INSTALL_DIR/include    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">Libraries   </td><td class="markdownTableBodyCenter">INSTALL_DIR/lib    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">Makefile.export.Zoltan2   </td><td class="markdownTableBodyCenter">INSTALL_DIR/include    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">Zoltan2Config.cmake   </td><td class="markdownTableBodyCenter">INSTALL_DIR/lib/cmake/Zoltan2   </td></tr>
</table>
<p>If "make install" is executed without specifying the installation location, the build system will attempt to install the software in a common location (/usr/local at the time this was written).</p>
<hr  />
<h1><a class="anchor" id="z2_main_build2"></a>
Building Projects with Zoltan2</h1>
<p>The above installation locations of header files and libraries are sufficient to be able to build an application using <a class="el" href="namespaceZoltan2.html" title="Created by mbenlioglu on Aug 31, 2020.">Zoltan2</a>. However, for ease of use, there are two different methods that Trilinos (and thus <a class="el" href="namespaceZoltan2.html" title="Created by mbenlioglu on Aug 31, 2020.">Zoltan2</a>) provide a listing of all the Trilinos libraries and third-party-libraries and other useful build information automatically (more fully described in the Trilinos documentation: <a href="http://trilinos.org/about/documentation/">http://trilinos.org/about/documentation/</a>): <br  />
</p>
<ul>
<li>For cmake-aware projects, the cmake FIND_PACKAGE capability makes this information. Adding FIND_PACKAGE(Zoltan2) to your project's CMakeLists.txt file should fill in cmake variables Zoltan2_* that are needed for building with <a class="el" href="namespaceZoltan2.html" title="Created by mbenlioglu on Aug 31, 2020.">Zoltan2</a> (see <a href="http://trilinos.org/oldsite/Finding_Trilinos.txt">http://trilinos.org/oldsite/Finding_Trilinos.txt</a> for more details about usage). For instance,in the cmake variable Zoltan2_LIBRARIES will the the libraries that Zoltan depends upon and need to be linked by the applications. These libraries can be passed to the linker using the TARGET_LINK_LIBRARIES cmake directory.</li>
<li>The Makefile.export system is a way to build application code with <a class="el" href="namespaceZoltan2.html" title="Created by mbenlioglu on Aug 31, 2020.">Zoltan2</a> for applications that use simple Makefiles. Adding the line "include Makefile.export.Zoltan2" to your Makefile with import several variables Zoltan2_* that are needed for building with <a class="el" href="namespaceZoltan2.html" title="Created by mbenlioglu on Aug 31, 2020.">Zoltan2</a> (see <a href="http://trilinos.org/oldsite/Export_Makefile.txt">http://trilinos.org/oldsite/Export_Makefile.txt</a> for more details about usage). <br  />
 For instance,in the variable Zoltan2_LIBRARIES will the the libraries that Zoltan depends upon and need to be linked by the applications.</li>
</ul>
<hr  />
<h1><a class="anchor" id="z2_main_overview"></a>
Overview of the library usage</h1>
<p>Here we describe the typical user interaction with <a class="el" href="namespaceZoltan2.html" title="Created by mbenlioglu on Aug 31, 2020.">Zoltan2</a>. We use partitioning as an example.</p>
<ol type="1">
<li>Create a Zoltan2::InputAdapter object for your data. This adapter provides a uniform interface to user data for the <a class="el" href="namespaceZoltan2.html" title="Created by mbenlioglu on Aug 31, 2020.">Zoltan2</a> library. Adapter interfaces exist for the following classes of data:<ul>
<li>Zoltan2::MatrixInput (a row oriented matrix with optional row weights)</li>
<li>Zoltan2::GraphInput (an undirected weighted graph)</li>
<li>Zoltan2::VectorInput (a single or multi-vector with optional weights, also used for geometric coordinates)</li>
<li>Zoltan2::IdentifierInput (simple collection of identifiers)</li>
<li>Zoltan2::MeshInput: available soon.</li>
</ul>
</li>
<li>Create a Teuchos::ParameterList with your <a class="el" href="namespaceZoltan2.html" title="Created by mbenlioglu on Aug 31, 2020.">Zoltan2</a> parameters. If you are using a third party library (PT-Scotch, ParMetis) you can include a sublist of parameters for this library. See z2_parameters for a detailed list of parameters.</li>
<li>Create a <a class="el" href="classZoltan2_1_1PartitioningProblem.html" title="PartitioningProblem sets up partitioning problems for the user.">Zoltan2::PartitioningProblem</a>. It is templated on your Zoltan2::InputAdapter type. The constructor arguments are typically your input adapter and your parameter list.</li>
<li>Call <a class="el" href="classZoltan2_1_1PartitioningProblem.html#a7fbd58cf6f99192560035d494b5eee16" title="Direct the problem to create a solution.">Zoltan2::PartitioningProblem::solve()</a>.</li>
<li>Obtain a <a class="el" href="classZoltan2_1_1PartitioningSolution.html" title="A PartitioningSolution is a solution to a partitioning problem.">Zoltan2::PartitioningSolution</a> object from the <a class="el" href="classZoltan2_1_1PartitioningProblem.html" title="PartitioningProblem sets up partitioning problems for the user.">Zoltan2::PartitioningProblem</a> using the getSolution() function. </li>
</ol>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
